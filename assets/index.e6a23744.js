import{r as c,u as C,b as I,j as n,a as i,F as P,L as R}from"./index.3f5dcb5c.js";import{UserContext as $}from"./UserContext.9942ed02.js";const L="_navContainer_1nm5o_5",k="_nav_1nm5o_5",y="_logo_1nm5o_45",D="_navRightSide_1nm5o_57",j="_searchInput_1nm5o_69",w="_profilePicture_1nm5o_81",E="_error_1nm5o_97",e={navContainer:L,nav:k,logo:y,navRightSide:D,searchInput:j,profilePicture:w,error:E},F=()=>{const{user:h,username:r,appendSearchedUserDetails:d,appendSearchedUserPosts:v,appendSearchedUserId:f,appendSearchedUsername:_,updateUserData:l}=c.exports.useContext($),a=c.exports.useRef(null),[u,s]=c.exports.useState(null),o=C(),g=()=>{if(r===null)return o("/");a.current.value="",s(null),l(r),o(`/${r}`)},N=()=>{a.current.value="",s(null),l(r),o(`/${r}`)},p=I().search,U=parseInt(new URLSearchParams(p).get("limit"))||6,S=parseInt(new URLSearchParams(p).get("offset"))||0,x=async()=>{if(a.current.value==="")return s("Enter Username to search");try{const t=await(await fetch(`https://memoirs.onrender.com/api/v1/users/${a.current.value}?limit=${U}&offset=${S}`)).json();if(t.Error==="No User found")return s("Invalid Username");d(t.userDetails),v(t.userPosts),f(t.userDetails.userId),_(t.userDetails.username),s(null),o(`/${a.current.value}`)}catch(m){return s(m)}};return c.exports.useEffect(()=>{a.current.value=""},[r]),n("div",{className:e.navContainer,children:i("nav",{className:e.nav,children:[n("p",{className:e.logo,onClick:g,children:"Memoirs"}),i("div",{className:e.navRightSide,children:[u&&n("p",{className:e.error,children:u}),n("input",{ref:a,className:e.searchInput,type:"text",placeholder:"Search username"}),n("button",{className:e.searchButton,onClick:x,type:"button",children:"Search"}),r&&i(P,{children:[n(R,{to:`/${r}/post`,className:e.uploadLink,children:"Upload"}),n("img",{onClick:N,src:h.imageUrl,alt:"profile picture",className:e.profilePicture})]})]})]})})};export{F as N};
