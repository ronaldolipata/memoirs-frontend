import{r as s,b as v,u as y,a as n,F as U,j as t}from"./index.3f5dcb5c.js";import{UserContext as j}from"./UserContext.9942ed02.js";import{N as A}from"./index.e6a23744.js";import{P as F}from"./index.07dd6352.js";import"./CardContent.dc871c2f.js";const D="_createPostContainer_blt78_1",E="_rightSide_blt78_27",I="_image_blt78_45",O="_formTitle_blt78_59",w="_inputText_blt78_71",V="_textArea_blt78_73",X="_inputFile_blt78_75",$="_error_blt78_95",e={createPostContainer:D,rightSide:E,image:I,formTitle:O,inputText:w,textArea:V,inputFile:X,error:$},M=()=>{const{updateUserData:_,userId:i,username:r}=s.exports.useContext(j),g=v(),{previousTitle:h,previousContent:x,imageUrl:f,postId:c}=g.state,[l,C]=s.exports.useState(h),[p,b]=s.exports.useState(x),[u,m]=s.exports.useState(null),T=y(),P=o=>{C(o.target.value)},S=o=>{b(o.target.value)},N=async()=>{const o={userId:i,username:r,title:l,content:p};try{const a=await(await fetch(`https://memoirs.onrender.com/api/v1/posts/${c}`,{method:"PATCH",body:JSON.stringify(o),headers:{"Content-Type":"application/json","X-USER-ID":i,"X-POST-ID":c}})).json();if(a.Error)return m(a.Error);a.Message==="Post successfully updated"&&(_(r),T(`/${r}`))}catch(d){m(d)}};return n(U,{children:[t(A,{}),t("p",{className:e.formTitle,children:"Update post"}),n("form",{className:e.createPostContainer,children:[t(F,{imageUrl:f}),n("div",{className:e.rightSide,children:[t("input",{className:e.inputText,onChange:P,type:"text",defaultValue:l}),t("textarea",{className:e.textArea,onChange:S,name:"content",id:"content",cols:"30",rows:"10",defaultValue:p}),t("button",{onClick:N,type:"button",children:"Submit"}),u&&t("p",{className:e.error,children:u})]})]})]})};export{M as default};
