import{r as c,u as x,b as C,j as a,a as i,F as I,L as P}from"./index.a2e78bea.js";import{UserContext as q}from"./UserContext.340ef284.js";const R="_navContainer_4qbcg_5",$="_nav_4qbcg_5",L="_logo_4qbcg_45",k="_navRightSide_4qbcg_57",y="_searchInput_4qbcg_71",D="_profilePicture_4qbcg_83",j="_error_4qbcg_99",e={navContainer:R,nav:$,logo:L,navRightSide:k,searchInput:y,profilePicture:D,error:j},B=()=>{const{user:d,username:r,appendSearchedUserDetails:h,appendSearchedUserPosts:f,appendSearchedUserId:v,appendSearchedUsername:g,updateUserData:l}=c.exports.useContext(q),s=c.exports.useRef(null),[u,n]=c.exports.useState(null),o=x(),_=()=>{if(r===null)return o("/memoirs-frontend/login");s.current.value="",n(null),l(r),o(`/memoirs-frontend/${r}`)},N=()=>{s.current.value="",n(null),l(r),o(`/memoirs-frontend/${r}`)},p=C().search,U=parseInt(new URLSearchParams(p).get("limit"))||6,S=parseInt(new URLSearchParams(p).get("offset"))||0,b=async()=>{if(s.current.value==="")return n("Enter Username to search");try{const t=await(await fetch(`https://memoirs.onrender.com/api/v1/users/${s.current.value}?limit=${U}&offset=${S}`)).json();if(t.Error==="No User found")return n("Invalid Username");h(t.userDetails),f(t.userPosts),v(t.userDetails.userId),g(t.userDetails.username),n(null),o(`/memoirs-frontend/${s.current.value}`)}catch(m){return n(m)}};return c.exports.useEffect(()=>{s.current.value=""},[r]),a("div",{className:e.navContainer,children:i("nav",{className:e.nav,children:[a("p",{className:e.logo,onClick:_,children:"Memoirs"}),i("div",{className:e.navRightSide,children:[u&&a("p",{className:e.error,children:u}),a("input",{ref:s,className:e.searchInput,type:"text",placeholder:"Search username"}),a("button",{className:e.searchButton,onClick:b,type:"button",children:"Search"}),r&&i(I,{children:[a(P,{to:`/${r}/post`,className:e.uploadLink,children:"Upload"}),a("img",{onClick:N,src:d.imageUrl,alt:"profile picture",className:e.profilePicture})]})]})]})})};export{B as N};
