import{r as s,c as f,u as D,a as o,F as P,j as t,L as S}from"./index.3f5dcb5c.js";import{UserContext as U}from"./UserContext.9942ed02.js";import{N as _}from"./index.e6a23744.js";import{P as k}from"./index.07dd6352.js";import"./CardContent.dc871c2f.js";const w="_postContainer_mk8ht_1",I="_error_mk8ht_21",c={postContainer:w,error:I},X=()=>{const{userId:x,username:r,updateUserData:C}=s.exports.useContext(U),[m,v]=s.exports.useState(),[d,E]=s.exports.useState(),[u,g]=s.exports.useState(),[h,i]=s.exports.useState(null),{postId:a}=f(),{usernameParams:p}=f(),y=D(),N=async n=>{try{const l=await(await fetch(`https://memoirs.onrender.com/api/v1/posts/${n}`)).json();v(l.title),E(l.content),g(l.imageUrl)}catch(e){i(e)}},j=async()=>{try{const e=await(await fetch(`https://memoirs.onrender.com/api/v1/posts/${a}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-USER-ID":x,"X-POST-ID":a}})).json();e.Error&&i(e.Error),e.Message==="Post successfully deleted"&&(C(r),y(`/${r}`))}catch(n){i(n)}};return s.exports.useEffect(()=>{N(a)},[p,r]),o(P,{children:[t(_,{}),o("div",{className:c.postContainer,children:[t(k,{imageUrl:u}),o("div",{children:[t("h1",{children:m}),t("p",{children:d}),o("p",{children:["Author: @",p]}),r!==p?null:o(P,{children:[t(S,{className:c.editPostLink,state:{previousTitle:m,previousContent:d,imageUrl:u,postId:a},to:"update",children:"Edit post"}),t("button",{onClick:j,className:c.editPost,type:"button",children:"Delete post"})]}),h&&t("p",{className:c.error,children:h})]})]})]})};export{X as default};
