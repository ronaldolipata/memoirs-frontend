import{r as s,u as R,a as m,F as b,j as t}from"./index.3f5dcb5c.js";import{UserContext as D}from"./UserContext.9942ed02.js";import{N as L}from"./index.e6a23744.js";const P="_registerContainer_ycili_1",B="_inputText_ycili_15",k="_error_ycili_29",r={registerContainer:P,inputText:B,error:k},M=()=>{const{updateUserData:p}=s.exports.useContext(D),[u,g]=s.exports.useState(),[d,h]=s.exports.useState(),[n,x]=s.exports.useState(),[C,N]=s.exports.useState(),[f,y]=s.exports.useState(),[i,T]=s.exports.useState(null),[l,c]=s.exports.useState(null),S=R(),v=e=>{g(e.target.value)},w=e=>{h(e.target.value)},_=e=>{x(e.target.value)},O=e=>{N(e.target.value)},U=e=>{y(e.target.value)},F=e=>{const a=e.target.files[0];j(a)},j=e=>{const a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{T(a.result)}},E=async()=>{const e={firstName:u,lastName:d,username:n,password:C,email:f,imageUrl:i};i===null&&(e.imageUrl=null);try{const o=await(await fetch("https://memoirs.onrender.com/api/v1/users/register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json();if(o.Error)return c(o.Error);o.Message==="Successfully registered"&&(p(n),S(`/${n}`))}catch(a){c(a)}};return m(b,{children:[t(L,{}),m("form",{className:r.registerContainer,children:[t("input",{onChange:v,className:r.inputText,type:"text",name:"firstName",placeholder:"First name"}),t("input",{onChange:w,className:r.inputText,type:"text",name:"lastName",placeholder:"Last name"}),t("input",{onChange:_,className:r.inputText,type:"text",name:"username",placeholder:"Username"}),t("input",{onChange:O,className:r.inputText,type:"password",name:"password",placeholder:"Password"}),t("input",{onChange:U,className:r.inputText,type:"email",name:"email",placeholder:"Email"}),t("input",{className:r.inputFile,onChange:F,type:"file",name:"image"}),t("button",{onClick:E,type:"button",children:"Register"}),l&&t("p",{className:r.error,children:l})]})]})};export{M as default};
