import{r,b as R,u as A,a as x,F as k,j as t}from"./index.a2e78bea.js";import{UserContext as H}from"./UserContext.340ef284.js";import{N as J}from"./index.876dce40.js";const M="_updateProfileContainer_myt4j_1",X="_inputText_myt4j_15",$="_profilePicture_myt4j_29",q="_error_myt4j_45",a={updateProfileContainer:M,inputText:X,profilePicture:$,error:q},Q=()=>{const{updateUserData:N,userId:h}=r.exports.useContext(H),C=R(),{previousFirstName:y,previousLastName:v,previousUsername:o,previousPassword:P,previousEmail:l,previousImageUrl:u,previousBio:T}=C.state,[p,_]=r.exports.useState(y),[c,b]=r.exports.useState(v),[w,U]=r.exports.useState(P),[m,j]=r.exports.useState(null),[n,S]=r.exports.useState(T),[d,f]=r.exports.useState(null),F=A(),g=!0,E=e=>{_(e.target.value)},O=e=>{b(e.target.value)},I=e=>{U(e.target.value)},V=e=>{S(e.target.value)},B=e=>{const s=e.target.files[0];D(s)},D=e=>{const s=new FileReader;s.readAsDataURL(e),s.onloadend=()=>{j(s.result)}},L=async()=>{const e={firstName:p,lastName:c,username:o,password:w,email:l,image:u,bio:n};m!==null&&(e.image=m);try{const i=await(await fetch("https://memoirs.onrender.com/api/v1/users/update",{method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json","X-USER-ID":h}})).json();i.Error&&f(i.Error),i.Message==="User profile successfully updated"&&(N(o),F(`/${o}`))}catch(s){f(s)}};return x(k,{children:[t(J,{}),x("form",{className:a.updateProfileContainer,children:[t("img",{src:u,alt:"profile picture",className:a.profilePicture}),t("input",{className:a.inputFile,onChange:B,type:"file",name:"image"}),t("input",{onChange:E,className:a.inputText,type:"text",name:"firstName",defaultValue:p}),t("input",{onChange:O,className:a.inputText,type:"text",name:"lastName",defaultValue:c}),t("input",{className:a.inputText,type:"text",name:"username",defaultValue:o,disabled:g}),t("input",{onChange:I,className:a.inputText,type:"password",name:"password",placeholder:"Change password?"}),t("input",{className:a.inputText,type:"email",name:"email",defaultValue:l,disabled:g}),t("input",{onChange:V,className:a.inputText,type:"text",name:"bio",placeholder:n===null?"Enter bio":n,defaultValue:n}),t("button",{onClick:L,type:"button",children:"Update profile"}),d&&t("p",{className:a.error,children:d})]})]})};export{Q as default};
